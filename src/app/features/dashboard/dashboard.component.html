<div class="dashboard-container">
  <!-- Header -->
  <div class="dashboard-header">
    <div class="welcome-section">
      <div>
        <h1 class="greeting">
          Benvenuto, {{ currentUser()?.firstName || 'Utente' }}! ğŸ‘‹
        </h1>
        <p class="subtitle">
          {{ currentUser()?.role === 'manager' ? 'Ecco cosa sta succedendo nella tua palestra.' : 'Pronto per il prossimo allenamento?' }}
        </p>
      </div>
      <div class="user-avatar">
        {{ currentUser()?.firstName?.charAt(0) || 'U' }}{{ currentUser()?.lastName?.charAt(0) || '' }}
      </div>
    </div>
  </div>

  <!-- Stats Grid -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-header">
        <div class="stat-icon blue">ğŸ‘¥</div>
        <span class="stat-label">Iscritti Attivi</span>
      </div>
      <div class="stat-value">247</div>
      <div class="stat-change positive">
        <span>â†—</span> +12% questo mese
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-header">
        <div class="stat-icon red">ğŸ“…</div>
        <span class="stat-label">Lezioni Oggi</span>
      </div>
      <div class="stat-value">{{ todayCourses.length }}</div>
      <div class="stat-change">
        {{ getTotalEnrolled() }} iscritti totali
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-header">
        <div class="stat-icon blue">ğŸ’°</div>
        <span class="stat-label">Entrate Mese</span>
      </div>
      <div class="stat-value">â‚¬ 8,450</div>
      <div class="stat-change positive">
        <span>â†—</span> +8% rispetto al mese scorso
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-header">
        <div class="stat-icon red">ğŸ”¥</div>
        <span class="stat-label">Lezioni Settimana</span>
      </div>
      <div class="stat-value">42</div>
      <div class="stat-change">
        Media: 6 al giorno
      </div>
    </div>
  </div>

  <!-- Prossime Lezioni -->
  <div class="upcoming-section">
    <div class="section-header">
      <h2 class="section-title">Prossime Lezioni di Oggi</h2>
      <a href="/app/schedule" class="view-all-btn">Vedi tutte â†’</a>
    </div>

    @if (todayCourses.length > 0) {
      <div class="lessons-list">
        @for (course of todayCourses; track course.id) {
          <div class="lesson-card" [class]="getLessonClass($index)">
            <div class="lesson-time">{{ course.startTime }}</div>
            <div class="lesson-info">
              <div class="lesson-name">{{ course.name }}</div>
              <div class="lesson-instructor">
                <span class="instructor-icon">ğŸ‘¤</span>
                {{ course.instructor }}
              </div>
            </div>
            <div class="lesson-capacity">
              <div class="capacity-bar">
                <div class="capacity-fill" [style.width.%]="getCapacityPercentage(course)"></div>
              </div>
              <span class="capacity-text">{{ course.enrolledMembers.length }} / {{ course.maxCapacity }}</span>
            </div>
          </div>
        }
      </div>
    } @else {
      <div class="empty-lessons">
        <div class="empty-icon">ğŸ“…</div>
        <p class="empty-text">Nessun corso programmato per oggi.</p>
      </div>
    }
  </div>

  <!-- Notifiche e Avvisi -->
  <div class="content-grid">
    <!-- Notifiche -->
    <div class="notifications-section">
      <div class="section-header">
        <div class="header-with-icon">
          <div class="header-icon warning">âš ï¸</div>
          <h2 class="section-title">Notifiche</h2>
        </div>
      </div>
      
      <div class="notifications-list">
        <div class="notification-item warning">
          <div class="notification-icon">â°</div>
          <div class="notification-content">
            <div class="notification-title">Scadenza Abbonamento</div>
            <p class="notification-message">5 membri hanno l'abbonamento in scadenza entro 7 giorni</p>
          </div>
          <span class="notification-time">Oggi</span>
        </div>

        <div class="notification-item info">
          <div class="notification-icon">ğŸ“§</div>
          <div class="notification-content">
            <div class="notification-title">Nuova Iscrizione</div>
            <p class="notification-message">Marco Bianchi si Ã¨ iscritto al corso di Boxe</p>
          </div>
          <span class="notification-time">2 ore fa</span>
        </div>

        <div class="notification-item success">
          <div class="notification-icon">âœ“</div>
          <div class="notification-content">
            <div class="notification-title">Pagamento Ricevuto</div>
            <p class="notification-message">Abbonamento rinnovato: Laura Verdi - â‚¬80</p>
          </div>
          <span class="notification-time">5 ore fa</span>
        </div>
      </div>
    </div>

    <!-- Avvisi Importanti -->
    <div class="alerts-section">
      <div class="section-header">
        <div class="header-with-icon">
          <div class="header-icon info">ğŸ“¢</div>
          <h2 class="section-title">Avvisi</h2>
        </div>
      </div>

      <div class="alerts-list">
        <div class="alert-card important">
          <div class="alert-badge">Importante</div>
          <div class="alert-content">
            <h3 class="alert-title">Manutenzione Programmata</h3>
            <p class="alert-message">La palestra rimarrÃ  chiusa il giorno 25 Aprile per festa nazionale.</p>
          </div>
        </div>

        <div class="alert-card reminder">
          <div class="alert-badge">Promemoria</div>
          <div class="alert-content">
            <h3 class="alert-title">Riunione Staff</h3>
            <p class="alert-message">MercoledÃ¬ 28 Gennaio alle ore 14:00 - Sala riunioni</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Actions (solo per Manager) -->
  @if (currentUser()?.role === 'manager') {
    <div class="quick-actions-section">
      <h2 class="section-title">Azioni Rapide</h2>
      <div class="quick-actions">
        <button class="action-btn blue">
          <div class="action-icon">â•</div>
          <span class="action-label">Nuovo Iscritto</span>
        </button>
        <button class="action-btn red">
          <div class="action-icon">ğŸ¥Š</div>
          <span class="action-label">Nuova Lezione</span>
        </button>
        <button class="action-btn blue">
          <div class="action-icon">ğŸ’³</div>
          <span class="action-label">Registra Pagamento</span>
        </button>
        <button class="action-btn red">
          <div class="action-icon">ğŸ“Š</div>
          <span class="action-label">Report Mensile</span>
        </button>
      </div>
    </div>
  }
</div>
