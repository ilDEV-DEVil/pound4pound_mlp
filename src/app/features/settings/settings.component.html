<div class="settings-container">
  <!-- Header -->
  <div class="settings-header">
    <div class="header-content">
      <div class="header-text">
        <h1 class="page-title">Impostazioni</h1>
        <p class="page-subtitle">Gestisci il tuo account e le preferenze</p>
      </div>
      <div class="user-profile-badge">
        <div class="profile-avatar">
          {{ profileData().firstName.charAt(0) }}{{ profileData().lastName.charAt(0) }}
        </div>
        <div class="profile-info">
          <div class="profile-name">{{ profileData().firstName }} {{ profileData().lastName }}</div>
          <div class="profile-role">Atleta Intermedio</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Tabs Navigation -->
  <div class="tabs-container">
    <div class="tabs-nav">
      <button 
        class="tab-btn" 
        [class.active]="activeTab() === 'profile'"
        (click)="setActiveTab('profile')"
      >
        <span class="tab-icon">üë§</span>
        <span class="tab-label">Profilo</span>
      </button>
      <button 
        class="tab-btn" 
        [class.active]="activeTab() === 'app'"
        (click)="setActiveTab('app')"
      >
        <span class="tab-icon">‚öôÔ∏è</span>
        <span class="tab-label">Preferenze</span>
      </button>
      <button 
        class="tab-btn" 
        [class.active]="activeTab() === 'security'"
        (click)="setActiveTab('security')"
      >
        <span class="tab-icon">üîí</span>
        <span class="tab-label">Sicurezza</span>
      </button>
    </div>
  </div>

  <!-- Tab Content -->
  <div class="tab-content">
    <!-- Profile Tab -->
    @if (activeTab() === 'profile') {
      <div class="content-section">
        <div class="section-header">
          <h2 class="section-title">Informazioni Personali</h2>
          <p class="section-subtitle">Gestisci le tue informazioni personali</p>
        </div>

        <div class="form-card">
          <div class="form-grid">
            <div class="form-row">
              <div class="form-field">
                <label class="field-label">NOME</label>
                <input 
                  type="text" 
                  class="field-input"
                  [ngModel]="profileData().firstName"
                  (ngModelChange)="profileData.set({...profileData(), firstName: $event})"
                />
              </div>

              <div class="form-field">
                <label class="field-label">COGNOME</label>
                <input 
                  type="text" 
                  class="field-input"
                  [ngModel]="profileData().lastName"
                  (ngModelChange)="profileData.set({...profileData(), lastName: $event})"
                />
              </div>
            </div>

            <div class="form-field">
              <label class="field-label">EMAIL</label>
              <input 
                type="email" 
                class="field-input"
                [ngModel]="profileData().email"
                (ngModelChange)="profileData.set({...profileData(), email: $event})"
              />
            </div>

            <div class="form-field">
              <label class="field-label">TELEFONO</label>
              <input 
                type="tel" 
                class="field-input"
                [ngModel]="profileData().phone"
                (ngModelChange)="profileData.set({...profileData(), phone: $event})"
              />
            </div>

            <div class="form-field">
              <label class="field-label">BIO</label>
              <textarea 
                class="field-textarea"
                rows="4"
                [ngModel]="profileData().bio"
                (ngModelChange)="profileData.set({...profileData(), bio: $event})"
                placeholder="Parlaci di te..."
              ></textarea>
            </div>
          </div>

          <div class="form-actions">
            <button class="action-btn save-btn" (click)="saveProfile()" [disabled]="isLoading">
              @if (isLoading) {
                <span>‚è≥ Salvataggio...</span>
              } @else {
                <span>üíæ Salva Modifiche</span>
              }
            </button>
          </div>
        </div>
      </div>
    }

    <!-- App Settings Tab -->
    @if (activeTab() === 'app') {
      <div class="content-section">
        <div class="section-header">
          <h2 class="section-title">Preferenze Applicazione</h2>
          <p class="section-subtitle">Personalizza la tua esperienza</p>
        </div>

        <div class="settings-card">
          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-icon blue">üåô</div>
              <div class="setting-details">
                <h3 class="setting-title">Modalit√† Scura</h3>
                <p class="setting-description">Attiva il tema scuro per ridurre l'affaticamento degli occhi</p>
              </div>
            </div>
            <label class="toggle-switch">
              <input 
                type="checkbox" 
                [checked]="appSettings().darkMode"
                (change)="appSettings.set({...appSettings(), darkMode: !appSettings().darkMode})"
              />
              <span class="toggle-slider"></span>
            </label>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-icon red">üîî</div>
              <div class="setting-details">
                <h3 class="setting-title">Notifiche Push</h3>
                <p class="setting-description">Ricevi notifiche sulle lezioni e gli eventi</p>
              </div>
            </div>
            <label class="toggle-switch">
              <input 
                type="checkbox" 
                [checked]="appSettings().notifications"
                (change)="appSettings.set({...appSettings(), notifications: !appSettings().notifications})"
              />
              <span class="toggle-slider"></span>
            </label>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-icon blue">üìß</div>
              <div class="setting-details">
                <h3 class="setting-title">Aggiornamenti via Email</h3>
                <p class="setting-description">Ricevi newsletter e aggiornamenti periodici</p>
              </div>
            </div>
            <label class="toggle-switch">
              <input 
                type="checkbox" 
                [checked]="appSettings().emailUpdates"
                (change)="appSettings.set({...appSettings(), emailUpdates: !appSettings().emailUpdates})"
              />
              <span class="toggle-slider"></span>
            </label>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-icon red">üåç</div>
              <div class="setting-details">
                <h3 class="setting-title">Profilo Pubblico</h3>
                <p class="setting-description">Rendi visibile il tuo profilo agli altri atleti</p>
              </div>
            </div>
            <label class="toggle-switch">
              <input 
                type="checkbox" 
                [checked]="appSettings().publicProfile"
                (change)="appSettings.set({...appSettings(), publicProfile: !appSettings().publicProfile})"
              />
              <span class="toggle-slider"></span>
            </label>
          </div>

          <div class="form-actions">
            <button class="action-btn save-btn" (click)="saveAppSettings()" [disabled]="isLoading">
              @if (isLoading) {
                <span>‚è≥ Salvataggio...</span>
              } @else {
                <span>üíæ Salva Preferenze</span>
              }
            </button>
          </div>
        </div>
      </div>
    }

    <!-- Security Tab -->
    @if (activeTab() === 'security') {
      <div class="content-section">
        <div class="section-header">
          <h2 class="section-title">Sicurezza e Accesso</h2>
          <p class="section-subtitle">Gestisci password e accessi</p>
        </div>

        <div class="form-card">
          <div class="security-alert">
            <span class="alert-icon">‚ö†Ô∏è</span>
            <div class="alert-content">
              <h4 class="alert-title">Modifica Password</h4>
              <p class="alert-message">Assicurati di utilizzare una password sicura con almeno 8 caratteri</p>
            </div>
          </div>

          <div class="form-grid">
            <div class="form-field">
              <label class="field-label">PASSWORD ATTUALE</label>
              <input 
                type="password" 
                class="field-input"
                [ngModel]="securityData().currentPassword"
                (ngModelChange)="securityData.set({...securityData(), currentPassword: $event})"
                placeholder="Inserisci password attuale"
              />
            </div>

            <div class="form-field">
              <label class="field-label">NUOVA PASSWORD</label>
              <input 
                type="password" 
                class="field-input"
                [ngModel]="securityData().newPassword"
                (ngModelChange)="securityData.set({...securityData(), newPassword: $event})"
                placeholder="Inserisci nuova password"
              />
            </div>

            <div class="form-field">
              <label class="field-label">CONFERMA PASSWORD</label>
              <input 
                type="password" 
                class="field-input"
                [ngModel]="securityData().confirmPassword"
                (ngModelChange)="securityData.set({...securityData(), confirmPassword: $event})"
                placeholder="Conferma nuova password"
              />
            </div>
          </div>

          <div class="form-actions">
            <button class="action-btn save-btn" (click)="updatePassword()" [disabled]="isLoading">
              @if (isLoading) {
                <span>‚è≥ Aggiornamento...</span>
              } @else {
                <span>üîí Aggiorna Password</span>
              }
            </button>
          </div>
        </div>

        <!-- Logout Section -->
        <div class="logout-section">
          <div class="logout-card">
            <div class="logout-info">
              <h3 class="logout-title">Disconnetti Account</h3>
              <p class="logout-description">Esci dall'applicazione su questo dispositivo</p>
            </div>
            <button class="action-btn logout-btn" (click)="logout()">
              <span>üö™ Disconnetti</span>
            </button>
          </div>
        </div>
      </div>
    }
  </div>
</div>
