import{a as b}from"./chunk-SV66IFOS.js";import{a as u}from"./chunk-GPLNY3OJ.js";import{J as p,O as c,a,j as r,y as o}from"./chunk-BEVKRHCI.js";var S=class n{storage=c(u);mockData=c(b);STORAGE_KEY="subscriptions";constructor(){this.ensureData()}ensureData(){this.storage.getItem(this.STORAGE_KEY)||this.storage.setItem(this.STORAGE_KEY,this.mockData.getInitialSubscriptions())}getSubscriptions(){let t=this.storage.getItem(this.STORAGE_KEY)||[];return r(t).pipe(o(400))}getSubscriptionById(t){let e=(this.storage.getItem(this.STORAGE_KEY)||[]).find(s=>s.id===t);return r(e).pipe(o(200))}createSubscription(t){let i=this.storage.getItem(this.STORAGE_KEY)||[],e={id:`sub-${Date.now()}`,gymId:"gym-001",name:t.name,price:t.price,durationMonths:t.durationMonths,description:t.description||"",maxEntries:t.maxEntries};return i.push(e),this.storage.setItem(this.STORAGE_KEY,i),r(e).pipe(o(600))}updateSubscription(t,i){let e=this.storage.getItem(this.STORAGE_KEY)||[],s=e.findIndex(m=>m.id===t);if(s!==-1)return e[s]=a(a({},e[s]),i),this.storage.setItem(this.STORAGE_KEY,e),r(e[s]).pipe(o(400));throw new Error("Subscription not found")}deleteSubscription(t){let i=this.storage.getItem(this.STORAGE_KEY)||[],e=i.length;return i=i.filter(s=>s.id!==t),i.length!==e?(this.storage.setItem(this.STORAGE_KEY,i),r(!0).pipe(o(400))):r(!1)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=p({token:n,factory:n.\u0275fac,providedIn:"root"})};export{S as a};
