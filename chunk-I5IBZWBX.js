import{a as C}from"./chunk-22NGOLQD.js";import{a as N,b as _,c as T}from"./chunk-GXNJPQZJ.js";import{d,e as S,f as E,h as y,i as F,j as w,n as L,p as M}from"./chunk-VCVHHIZR.js";import{e as b}from"./chunk-NEG2TRQO.js";import"./chunk-A56IJIXF.js";import"./chunk-XZBPQROW.js";import{$a as f,Da as u,Jb as v,Ma as c,Na as g,O as s,Sa as l,Ta as t,Ua as r,Va as p,bb as x,kb as i,mb as h,sa as n}from"./chunk-UZVCIO6A.js";function A(m,a){if(m&1&&(t(0,"div",10),i(1),r()),m&2){let e=x();n(),h(" ",e.errorMessage," ")}}var k=class m{fb=s(L);authService=s(C);loginForm=this.fb.group({email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]]});loading=!1;errorMessage="";getError(a){let e=this.loginForm.get(a);if(e?.touched&&e?.errors){if(e.errors.required)return"Campo obbligatorio";if(e.errors.email)return"Email non valida";if(e.errors.minlength)return"La password deve avere almeno 6 caratteri"}}onSubmit(){if(this.loginForm.valid){this.loading=!0,this.errorMessage="";let{email:a,password:e}=this.loginForm.value;this.authService.login(a,e).subscribe({next:()=>{},error:o=>{this.loading=!1,this.errorMessage=o.message||"Credenziali non valide"}})}else this.loginForm.markAllAsTouched()}static \u0275fac=function(e){return new(e||m)};static \u0275cmp=u({type:m,selectors:[["app-login"]],decls:34,vars:10,consts:[[3,"hoverable","headerTemplate","footerTemplate"],["card-header",""],[1,"h3","text-center","mb-2"],[1,"text-muted","text-center","text-sm"],[1,"flex","flex-col","gap-4",3,"ngSubmit","formGroup"],["label","Email","type","email","placeholder","nome@esempio.com","formControlName","email",3,"error"],[1,"flex","flex-col","gap-1"],["label","Password","type","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","formControlName","password",3,"error"],[1,"flex","justify-end"],["routerLink","/auth/forgot-password",1,"text-xs","text-muted","hover:text-primary"],[1,"p-3","bg-red-900/20","border","border-red-500/30","rounded","text-red-400","text-sm","text-center"],[1,"mt-2"],["type","submit",3,"loading","disabled","fullWidth"],["card-footer","",1,"text-center"],[1,"text-sm","text-muted"],["routerLink","/auth/register",1,"text-sm","font-medium","hover:underline"],[1,"mt-8","p-4","border","border-dashed","border-gray-700","rounded-lg","bg-gray-900/50"],[1,"text-xs","text-muted","font-mono","mb-2","text-center"],[1,"grid","grid-cols-2","gap-4","text-xs","text-gray-400"],[1,"block","font-bold","text-accent"],[1,"text-right"]],template:function(e,o){e&1&&(t(0,"app-card",0)(1,"div",1)(2,"h2",2),i(3,"Bentornato"),r(),t(4,"p",3),i(5,"Inserisci le tue credenziali per accedere"),r()(),t(6,"form",4),f("ngSubmit",function(){return o.onSubmit()}),p(7,"app-input",5),t(8,"div",6),p(9,"app-input",7),t(10,"div",8)(11,"a",9),i(12," Password dimenticata? "),r()()(),c(13,A,2,1,"div",10),t(14,"div",11)(15,"app-button",12),i(16," Accedi "),r()()(),t(17,"div",13)(18,"span",14),i(19,"Non hai un account? "),r(),t(20,"a",15),i(21,"Registrati"),r()()(),t(22,"div",16)(23,"p",17),i(24,"DEMO CREDENTIALS"),r(),t(25,"div",18)(26,"div")(27,"span",19),i(28,"Gestore:"),r(),i(29," marco@fightclub.it "),r(),t(30,"div",20)(31,"span",19),i(32,"Atleta:"),r(),i(33," luca@gmail.com "),r()()()),e&2&&(l("hoverable",!1)("headerTemplate",!0)("footerTemplate",!0),n(6),l("formGroup",o.loginForm),n(),l("error",o.getError("email")),n(2),l("error",o.getError("password")),n(4),g(o.errorMessage?13:-1),n(2),l("loading",o.loading)("disabled",o.loginForm.invalid)("fullWidth",!0))},dependencies:[v,M,y,S,E,w,F,b,N,_,T],styles:["[_nghost-%COMP%]{display:block;width:100%}"]})};export{k as LoginComponent};
