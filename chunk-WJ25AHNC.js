import{a as p}from"./chunk-SV66IFOS.js";import{a as h}from"./chunk-GPLNY3OJ.js";import{J as d,O as l,a as n,j as s,y as a}from"./chunk-BEVKRHCI.js";var g=class i{storage=l(h);mockData=l(p);constructor(){this.ensureData()}ensureData(){if(!this.storage.getItem("members")){let e=this.generateMockMembers(15);this.storage.setItem("members",e)}}getMembers(){let e=this.storage.getItem("members")||[];return s(e).pipe(a(500))}getMemberById(e){let t=(this.storage.getItem("members")||[]).find(o=>o.id===e);return s(t).pipe(a(300))}addMember(e){let r=this.storage.getItem("members")||[],t={id:`m-${Date.now()}`,gymId:"gym-001",userId:`u-${Date.now()}`,firstName:e.firstName,lastName:e.lastName,email:e.email,phone:e.phone,avatar:null,subscriptionId:e.subscriptionId||null,enrolledCourses:[],joinedAt:new Date};return r.unshift(t),this.storage.setItem("members",r),s(t).pipe(a(600))}updateMember(e,r){let t=this.storage.getItem("members")||[],o=t.findIndex(m=>m.id===e);return o!==-1?(t[o]=n(n({},t[o]),r),this.storage.setItem("members",t),s(t[o]).pipe(a(400))):s(null).pipe(a(400))}generateMockMembers(e){let r=["Marco","Luca","Giulia","Sofia","Matteo","Alessandro","Francesca","Chiara"],t=["Rossi","Bianchi","Ferrari","Esposito","Ricci","Marino","Greco","Bruno"],o=["gmail.com","outlook.it","yahoo.com","libero.it"],m=this.storage.getItem("subscriptions")||this.mockData.getInitialSubscriptions();return Array.from({length:e}).map((f,b)=>{let c=r[Math.floor(Math.random()*r.length)],u=t[Math.floor(Math.random()*t.length)],M=Math.random()>.3?m[Math.floor(Math.random()*m.length)]:null;return{id:`m-mock-${b}`,gymId:"gym-001",userId:`u-mock-${b}`,firstName:c,lastName:u,email:`${c.toLowerCase()}.${u.toLowerCase()}@${o[Math.floor(Math.random()*o.length)]}`,phone:`3${Math.floor(Math.random()*9)}0 1234567`,avatar:null,subscriptionId:M?M.id:null,enrolledCourses:[],joinedAt:new Date(2025,Math.floor(Math.random()*12),Math.floor(Math.random()*28))}})}static \u0275fac=function(r){return new(r||i)};static \u0275prov=d({token:i,factory:i.\u0275fac,providedIn:"root"})};export{g as a};
