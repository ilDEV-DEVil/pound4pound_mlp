import{a as x}from"./chunk-OQ72E7RW.js";import{a as R,b as T,c as q}from"./chunk-YUGMXLOU.js";import{d as s,e as y,f as S,h as E,i as F,j as M,n as P,p as _}from"./chunk-AAETB4I6.js";import{d as w,e as N}from"./chunk-AJBIW7CZ.js";import"./chunk-DO7T4SEG.js";import"./chunk-2L2WFLXW.js";import{Ca as c,Ib as b,La as f,Ma as g,O as d,Ra as i,Sa as a,Ta as n,Ua as p,_a as h,ab as v,jb as m,lb as C,ra as o}from"./chunk-62IWQYBS.js";function D(l,t){if(l&1&&(a(0,"div",11),m(1),n()),l&2){let e=v();o(),C(" ",e.errorMessage," ")}}var A=class l{fb=d(P);authService=d(x);router=d(w);registerForm=this.fb.group({firstName:["",[s.required]],lastName:["",[s.required]],email:["",[s.required,s.email]],password:["",[s.required,s.minLength(8)]],confirmPassword:["",[s.required]]},{validators:this.passwordMatchValidator});loading=!1;errorMessage="";passwordMatchValidator(t){return t.get("password").value===t.get("confirmPassword").value?null:{mismatch:!0}}getError(t){let e=this.registerForm.get(t);if(e?.touched&&e?.errors){if(e.errors.required)return"Campo obbligatorio";if(e.errors.email)return"Email non valida";if(e.errors.minlength)return"Password troppo corta";if(e.errors.mismatch)return"Le password non coincidono"}if(t==="confirmPassword"&&this.registerForm.errors?.mismatch&&e?.touched)return"Le password non coincidono"}onSubmit(){if(this.registerForm.valid){this.loading=!0,this.errorMessage="";let{firstName:t,lastName:e,email:r,password:u}=this.registerForm.value;this.router.navigate(["/onboarding/role-selection"],{state:{userData:{firstName:t,lastName:e,email:r},password:u}})}else this.registerForm.markAllAsTouched()}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=c({type:l,selectors:[["app-register"]],decls:22,vars:13,consts:[[3,"hoverable","headerTemplate","footerTemplate"],["card-header",""],[1,"h3","text-center","mb-2"],[1,"text-muted","text-center","text-sm"],[1,"flex","flex-col","gap-4",3,"ngSubmit","formGroup"],[1,"flex","gap-4"],["label","Nome","formControlName","firstName",1,"flex-1",3,"error"],["label","Cognome","formControlName","lastName",1,"flex-1",3,"error"],["label","Email","type","email","placeholder","nome@esempio.com","formControlName","email",3,"error"],["label","Password","type","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","formControlName","password","hint","Minimo 8 caratteri",3,"error"],["label","Conferma Password","type","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","formControlName","confirmPassword",3,"error"],[1,"p-3","bg-red-900/20","border","border-red-500/30","rounded","text-red-400","text-sm","text-center"],[1,"mt-2"],["type","submit",3,"loading","disabled","fullWidth"],["card-footer","",1,"text-center"],[1,"text-sm","text-muted"],["routerLink","/auth/login",1,"text-sm","font-medium","hover:underline"]],template:function(e,r){e&1&&(a(0,"app-card",0)(1,"div",1)(2,"h2",2),m(3,"Crea Account"),n(),a(4,"p",3),m(5,"Unisciti alla community di Pound for Pound"),n()(),a(6,"form",4),h("ngSubmit",function(){return r.onSubmit()}),a(7,"div",5),p(8,"app-input",6)(9,"app-input",7),n(),p(10,"app-input",8)(11,"app-input",9)(12,"app-input",10),f(13,D,2,1,"div",11),a(14,"div",12)(15,"app-button",13),m(16," Continua "),n()()(),a(17,"div",14)(18,"span",15),m(19,"Hai gi\xE0 un account? "),n(),a(20,"a",16),m(21,"Accedi"),n()()()),e&2&&(i("hoverable",!1)("headerTemplate",!0)("footerTemplate",!0),o(6),i("formGroup",r.registerForm),o(2),i("error",r.getError("firstName")),o(),i("error",r.getError("lastName")),o(),i("error",r.getError("email")),o(),i("error",r.getError("password")),o(),i("error",r.getError("confirmPassword")),o(),g(r.errorMessage?13:-1),o(2),i("loading",r.loading)("disabled",r.registerForm.invalid)("fullWidth",!0))},dependencies:[b,_,E,y,S,M,F,N,R,T,q],styles:["[_nghost-%COMP%]{display:block;width:100%}"]})};export{A as RegisterComponent};
